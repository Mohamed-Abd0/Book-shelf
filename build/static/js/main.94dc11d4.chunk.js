(this["webpackJsonpnd0191-myreads-starter"]=this["webpackJsonpnd0191-myreads-starter"]||[]).push([[0],{16:function(e,t,n){},18:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n(11),s=n.n(a),c=(n(16),n(5)),r=n.n(c),i=n(8),l=n(4),j=(n(18),n(6)),u="https://reactnd-books-api.udacity.com",b=localStorage.token;b||(b=localStorage.token=Math.random().toString(36).substr(-8));var h={Accept:"application/json",Authorization:b},d=function(e,t){return fetch("".concat(u,"/books/").concat(e.id),{method:"PUT",headers:Object(j.a)(Object(j.a)({},h),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))},f=n(7),v=n(1),O=function(e){var t=e.bookInfo,n=e.onMoveBook;return Object(v.jsx)("li",{children:Object(v.jsxs)("div",{className:"book",children:[Object(v.jsxs)("div",{className:"book-top",children:[Object(v.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:null!==t.imageLinks&&0!==t.imageLinks&&t.imageLinks?"url(".concat(t.imageLinks.thumbnail,")"):"url(https://via.placeholder.com/128x192/000000/FFFFFF/?text=no-image)"}}),Object(v.jsx)("div",{className:"book-shelf-changer",children:Object(v.jsxs)("select",{value:t.shelf,onChange:function(e){var o=e.target.value;n(t,o)},children:[Object(v.jsx)("option",{value:"none",disabled:!0,children:"Move to..."}),Object(v.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(v.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(v.jsx)("option",{value:"read",children:"Read"}),Object(v.jsx)("option",{value:"none",children:"None"})]})})]}),Object(v.jsxs)("div",{className:"book-title",children:[t.title," "]}),Object(v.jsxs)("div",{className:"book-authors",children:[" ",t.authors]})]})})},k=function(e){var t=e.data,n=e.onMoveBook,a=Object(o.useState)([]),s=Object(l.a)(a,2),c=s[0],b=s[1],d=function(){var e=Object(i.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t.target.value){e.next=4;break}b([]),e.next=9;break;case 4:return e.next=6,o=t.target.value,a=void 0,fetch("".concat(u,"/search"),{method:"POST",headers:Object(j.a)(Object(j.a)({},h),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:o,maxResults:a})}).then((function(e){return e.json()})).then((function(e){return e.books}));case 6:n=e.sent,console.log("this data come from the server after search",n),n.error?b([]):b(n);case 9:case"end":return e.stop()}var o,a}),e)})));return function(t){return e.apply(this,arguments)}}();if(t[0]){var k=c.map((function(e){var n=t.filter((function(t){return e.id===t.id}));return n[0]?n[0]:Object(j.a)(Object(j.a)({},e),{},{shelf:"none"})}));return console.log("this data after matching",k),Object(v.jsxs)("div",{className:"search-books",children:[Object(v.jsxs)("div",{className:"search-books-bar",children:[Object(v.jsx)(f.b,{to:"/",className:"close-search"}),Object(v.jsx)("div",{className:"search-books-input-wrapper",children:Object(v.jsx)("input",{type:"text",placeholder:"Search by title, author, or ISBN",onChange:d})})]}),Object(v.jsx)("div",{className:"search-books-results",children:Object(v.jsx)("ol",{className:"books-grid",children:k[0]?k.map((function(e){return Object(v.jsx)(O,{bookInfo:e,onMoveBook:n},e.id)})):Object(v.jsx)("li",{children:" please enter valid name"})})})]})}return null},m=function(e){var t=e.books,n=e.name,o=e.onMoveBook;return Object(v.jsxs)("div",{className:"bookshelf",children:[Object(v.jsx)("h2",{className:"bookshelf-title",children:n}),Object(v.jsx)("div",{className:"bookshelf-books",children:Object(v.jsxs)("ol",{className:"books-grid",children:[t.map((function(e){return Object(v.jsx)(O,{bookInfo:e,onMoveBook:o},e.id)})),";"]})})]})},x=function(e){var t=e.data,n=e.onMoveBook,o=["currentlyReading","wantToRead","read"];return t[0]?Object(v.jsxs)("div",{className:"list-books",children:[Object(v.jsx)("div",{className:"list-books-title",children:Object(v.jsx)("h1",{children:"MyReads"})}),Object(v.jsxs)("div",{className:"list-books-content",children:[Object(v.jsx)(m,{books:t.filter((function(e){return e.shelf===o[0]})),name:o[0],onMoveBook:n}),Object(v.jsx)(m,{books:t.filter((function(e){return e.shelf===o[1]})),name:o[1],onMoveBook:n}),Object(v.jsx)(m,{books:t.filter((function(e){return e.shelf===o[2]})),name:o[2],onMoveBook:n})]}),Object(v.jsx)("div",{className:"open-search",children:Object(v.jsx)(f.b,{to:"/search"})})]}):null},p=n(2);var g=function(){var e=Object(o.useState)([]),t=Object(l.a)(e,2),n=t[0],a=t[1],s=function(){var e=Object(i.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(u,"/books"),{headers:h}).then((function(e){return e.json()})).then((function(e){return e.books}));case 2:t=e.sent,a(t),console.log("this data come from the server after using getAll() ",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){s(),console.log("I am here in useEffect")}),[]);var c=function(){var e=Object(i.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(t,n);case 2:s();case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(v.jsx)("div",{className:"app",children:Object(v.jsxs)(p.c,{children:[Object(v.jsx)(p.a,{path:"/Book-shelf/",element:Object(v.jsx)(x,{data:n,onMoveBook:c})}),Object(v.jsx)(p.a,{path:"/Book-shelf/search",element:Object(v.jsx)(k,{data:n,onMoveBook:c})})]})})};s.a.render(Object(v.jsx)(f.a,{children:Object(v.jsx)(g,{})}),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.94dc11d4.chunk.js.map